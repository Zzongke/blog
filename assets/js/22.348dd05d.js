(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{530:function(s,t,a){s.exports=a.p+"assets/img/SPA.bb5b901f.png"},566:function(s,t,a){"use strict";a.r(t);var n=a(9),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一、什么是首屏加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、什么是首屏加载"}},[s._v("#")]),s._v(" 一、什么是首屏加载")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("首屏时间(First Contentful Paint),指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一样要全部渲染完成，但需要展示当前视窗需要的内容")]),s._v(" "),n("p",[s._v("首屏加载可以说是用户体验中重要的环节。")]),s._v(" "),n("h2",{attrs:{id:"二、加载慢的原因"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、加载慢的原因"}},[s._v("#")]),s._v(" 二、加载慢的原因")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("在页面渲染的过程，导致加载速度慢的因素可能如下：")]),s._v(" "),n("ul",[n("li",[s._v("网络延时问题")]),s._v(" "),n("li",[s._v("资源文件体积是否过大")]),s._v(" "),n("li",[s._v("资源是否重发发送请求去加载了")]),s._v(" "),n("li",[s._v("加载脚本的时候，渲染内容堵塞")])]),s._v(" "),n("h2",{attrs:{id:"三、解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、解决方案"}},[s._v("#")]),s._v(" 三、解决方案")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("常见的几种 SPA 首屏优化方式")]),s._v(" "),n("ul",[n("li",[s._v("减少入口文件体积")]),s._v(" "),n("li",[s._v("静态资源本地缓存")]),s._v(" "),n("li",[s._v("UI 框架按需加载")]),s._v(" "),n("li",[s._v("图片资源压缩")]),s._v(" "),n("li",[s._v("开启 Gzip 压缩")]),s._v(" "),n("li",[s._v("使用 SSR")])]),s._v(" "),n("h3",{attrs:{id:"减少入口文件体积"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#减少入口文件体积"}},[s._v("#")]),s._v(" 减少入口文件体积")]),s._v(" "),n("ol",[n("li",[s._v("常用的手段是路由懒加载，把不同路由对应的组件分割成不同的代码块，待路由被请求的时候会单独打包路由，使得入口文件变小，加载速度大大增加。")]),s._v(" "),n("li",[s._v("还有就是使用 cdn 加速，减少文件体积，但是要是看别人的 cdn 服务器稳不稳定，也可以自己下载 cdn 放到自己服务器，但是自己服务器没有 cdn 分发的话，速度就会在下载 cdn 文件时候影响加载速度。")])]),s._v(" "),n("h3",{attrs:{id:"静态资源本地缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#静态资源本地缓存"}},[s._v("#")]),s._v(" 静态资源本地缓存")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("后端返回的资源问题:")]),s._v(" "),n("ul",[n("li",[s._v("采用"),n("code",[s._v("HTTP")]),s._v("缓存，设置"),n("code",[s._v("Cache-Control")]),s._v("，"),n("code",[s._v("Last-Modified")]),s._v("，"),n("code",[s._v("Etag")]),s._v("等响应头")]),s._v(" "),n("li",[s._v("采用"),n("code",[s._v("Service Worker")]),s._v("离线缓存\n前端合理使用 LocalStorage")])]),s._v(" "),n("h3",{attrs:{id:"ui-框架按需加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ui-框架按需加载"}},[s._v("#")]),s._v(" UI 框架按需加载")]),s._v(" "),n("h3",{attrs:{id:"图片资源的压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图片资源的压缩"}},[s._v("#")]),s._v(" 图片资源的压缩")]),s._v(" "),n("p",[s._v("图片资源虽然不在编码过程中，但它却是对页面性能影响最大的因素\n对于所有的图片资源，我们可以进行适当的压缩\n对于页面上使用到的 icon，可以使用在线字体图标，或者雪碧图，将众多小图标合并到一张图上，减少"),n("code",[s._v("HTTP")]),s._v("请求次数")]),s._v(" "),n("h3",{attrs:{id:"开启-gzip-压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开启-gzip-压缩"}},[s._v("#")]),s._v(" 开启 Gzip 压缩")]),s._v(" "),n("p",[s._v("拆完包之后，我们在使用"),n("code",[s._v("Gzip")]),s._v("做一下压缩，安装"),n("code",[s._v("compression-webpack-plugin")])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" compression-webpack-plugin -D\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("在"),n("code",[s._v("vue.config.js")]),s._v("中引入并修改"),n("code",[s._v("webpack")]),s._v("配置")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" CompressionWebpackPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"compression-webpack-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//省略")]),s._v("\n  configureWebpack"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompressionWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(js|css)$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//匹配文件名")]),s._v("\n        threshold"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//对超过10k的数据进行压缩")]),s._v("\n        minRatio"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 压缩比")]),s._v("\n        deleteOriginalAssets"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//是否删除原文件")]),s._v("\n         exclude"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/node_modules/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("在服务器我们也要做相应的配置，比如"),n("code",[s._v("Nginx")])]),s._v(" "),n("div",{staticClass:"language-Nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip")]),s._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_disable")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msie6"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_vary")]),s._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_proxied")]),s._v(" any"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_comp_level")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_buffers")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_http_version")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_min_length")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("gzip_types")]),s._v(" application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("atom"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("xml application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("geo")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("json application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("javascript application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("javascript application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("json application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ld"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("json application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("manifest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("json application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rdf"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("xml application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rss"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("xml application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xhtml"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("xml application"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xml font"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("eot font"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("otf font"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ttf image"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("svg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("xml text"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("css text"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("javascript text"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plain text"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xml"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"使用-ssr"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-ssr"}},[s._v("#")]),s._v(" 使用 SSR")]),s._v(" "),n("p",[s._v("SSR(Server side)，也就是服务器渲染，组件或页面通过服务器生成 html 字符串，再发送到浏览器\n从头搭建一个服务器渲染是很复杂的，"),n("code",[s._v("Vue")]),s._v("应用建议使用"),n("code",[s._v("Nuxt.js")]),s._v("实现服务器渲染")]),s._v(" "),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("p",[s._v("减少首屏渲染时间的方法有很多，总的来讲可以分成两大部分，资源加载优化和页面渲染优化")]),s._v(" "),n("p",[s._v("下图是更为全面的首屏优化的方案")]),s._v(" "),n("p",[n("img",{attrs:{src:a(530),alt:"首屏优化",title:"首屏优化"}})]),s._v(" "),n("p",[s._v("大家可以根据自己项目的情况选择各种方式进行首屏渲染的优化")])])}),[],!1,null,null,null);t.default=e.exports}}]);